## è®¾è®¡æ¨¡å¼
### 1. ç­–ç•¥æ¨¡å¼ï¼ˆstrategy patternï¼‰
ä¸€ä¸ªç±»ä¸­å®¹æ˜“å˜åŒ–çš„éƒ¨åˆ† å¯ä»¥æŠ½ç¦»æˆç±»çš„ä¸€ä¸ªå±æ€§ï¼Œä½¿ç”¨ç»„åˆæ–¹å¼ã€‚
ç»„åˆä¼˜äºç»§æ‰¿ï¼Œç»§æ‰¿æœ‰åˆ©äºä»£ç å¤ç”¨ï¼Œç»„åˆçš„å¯æ‰©å±•æ€§æ›´å¼ºã€‚

* ç­–ç•¥æ¥å£(æ­¦å™¨çš„è¡Œä¸ºæ¥å£)
* å…·ä½“çš„ç­–ç•¥å®ç°è¿™ä¸ªæ¥å£(å°åˆ€æ­¦å™¨ï¼Œå®å‰‘æ­¦å™¨ ...)
* ä½¿ç”¨ç­–ç•¥çš„ç±», å°†ç­–ç•¥ä½œä¸ºå±æ€§ï¼ˆè§’è‰²ç±»ï¼‰

ä¸ªäººè®¤ä¸ºä¹¦ä¸­çš„ç­–ç•¥æ¨¡å¼ä¸¾çš„ä¾‹å­ä¸æ˜¯å¾ˆå¥½~

### 2. è§‚å¯Ÿè€…æ¨¡å¼(Observer pattern)
ä¸€ä¸ªç±»æƒ³è¦å¿«é€Ÿçš„çŸ¥é“å¦ä¸€ä¸ªç±»çš„æ•°æ®æ”¹å˜ã€‚ä¸»è¦çš„æ€æƒ³æ˜¯ï¼š
å°†è§‚å¯Ÿè€…ç±»çš„å¯¹è±¡ ä½œä¸ºæˆå‘˜å˜é‡ äº¤ç»™ä¸»é¢˜ç±»è¿›è¡Œç®¡ç†ï¼Œå½“ä¸»é¢˜ç±»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ
è°ƒç”¨è‡ªèº«å±æ€§ä¸­ç»´æŠ¤çš„è§‚å¯Ÿè€…åˆ—è¡¨å¯¹åº”çš„æ‰§è¡Œæ–¹æ³•ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé€šå¸¸è§‚å¯Ÿè€…ç±»ä¸­ä¼šå«æœ‰ä¸€ä¸ªä¸»é¢˜ç±»çš„å¼•ç”¨ï¼Œ
åŒæ—¶æ³¨å†Œè§‚å¯Ÿè€…ï¼Œå…¶å®æ˜¯é€šè¿‡è§‚å¯Ÿè€…å†…éƒ¨çš„ ä¸»é¢˜ç±»å¼•ç”¨è¿›è¡Œ æ³¨å†Œã€‚

* ä¸»é¢˜æ¥å£ï¼šå…¶ä¸­å«æœ‰ï¼šæ·»åŠ è§‚å¯Ÿè€…ï¼Œåˆ é™¤è§‚å¯Ÿè€…ï¼Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‚
* ä¸»é¢˜æ¥å£å®ç°ï¼šå…¶ä¸­å«æœ‰å…·ä½“ç®¡ç† è§‚å¯Ÿè€…çš„æ•°æ®ç»“æ„ï¼ˆé€šå¸¸ä½¿ç”¨ä¸€ä¸ªlistï¼‰ï¼Œ
æ¥å®ç°æ·»åŠ ã€åˆ é™¤ã€é€šçŸ¥è§‚å¯Ÿè€…ã€‚

```java
import com.kingpopen.observerpattern.normal.Observer;

interface Subject {

  // æ·»åŠ 
  addObserver(Observer observer);

  // ç§»é™¤
  removeObserver(Observer observer);
  
  // é€šçŸ¥
  notifyObserver();
}
```
* è§‚å¯Ÿè€…æ¥å£ï¼šåŒ…å«ä¸€ä¸ªé€šçŸ¥çš„æ–¹æ³•ï¼Œç”¨äºåœ¨ä¸»é¢˜ä¸­è¢«è°ƒç”¨ã€‚
* è§‚å¯Ÿè€…è·å–æ•°æ®å­˜åœ¨ï¼šæ‹‰ï¼ˆè§‚å¯Ÿè€…è‡ªå·±é€šè¿‡ä¸»é¢˜çš„å¼•ç”¨è·å–æ•°æ®ï¼‰ 
å’Œ æ¨ï¼ˆä¸»é¢˜è°ƒç”¨è§‚å¯Ÿè€…çš„é€šçŸ¥æ–¹æ³•ï¼Œé€šè¿‡å‚æ•°ä¼ é€’ç»™è§‚å¯Ÿè€…ï¼‰ä¸¤ç§æ¨¡å¼ã€‚

```java
interface Observer {

  // é€šçŸ¥
  void notify();
}

class AObserver implements Observer{
  // ä¸»é¢˜çš„å¼•ç”¨
  private Subject subject;
  ......
  @Override
  void notify(){
    ......
  }
}
```

**é—®é¢˜ï¼šå¦‚æœè§‚å¯Ÿè€…ä¸­ä¿å­˜äº†ä¸€ä»½ä¸»é¢˜çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè§‚å¯Ÿè€…å¯èƒ½ä¼šé€šè¿‡è¿™ä¸ªå¼•ç”¨æ‰§è¡Œäº†å¾ˆå¤šè¶Šæƒçš„äº‹æƒ…ï¼Œ
æ¯”å¦‚ï¼šè°ƒç”¨é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…çš„æ–¹æ³• æˆ–è€… åˆ é™¤äº†å…¶ä»–çš„è§‚å¯Ÿè€…ã€‚** è¿™ç§é—®é¢˜å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ

### 3. è£…é¥°å™¨æ¨¡å¼(Decorator pattern)
ä¸€ä¸ªç±»Aæƒ³è¦åŠ¨æ€çš„æ‰©å±•å¦ä¸€ä¸ªç±»Bçš„åŠŸèƒ½(func)çš„æ—¶å€™ï¼Œå¯ä»¥å°†ç±»Bä½œä¸ºç±»Açš„æˆå‘˜å˜é‡ï¼Œ
ç„¶ååœ¨ç±»Aä¸­çš„funcé‡Œé¢ï¼šè°ƒç”¨ç±»Bçš„func è¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•ã€‚

ä»¥jdkä¸­çš„InputStreamä¸ºä¾‹ï¼š
* æŠ½è±¡ç»„ä»¶ï¼ˆInputStreamç±»ï¼‰: æŠ½è±¡ç»„ä»¶æ˜¯ä¸€ä¸ªæŠ½è±¡ç±» æˆ–è€… æ¥å£ï¼Œå®šä¹‰äº†ç›¸åº”çš„æ–¹æ³•ã€‚
```java
abstract class InputStream{
  // æŠ½è±¡çš„readæ–¹æ³•
  abstract int read();
  
  ......
}
```
* å…·ä½“ç»„ä»¶ï¼šå¯¹æŠ½è±¡ç»„ä»¶çš„å®ç°ï¼Œå®ç°äº†æŸäº›å…·ä½“åŠŸèƒ½ã€‚
  * FileInputStream: å®ç°äº†è¯»å–æ–‡ä»¶çš„åŠŸèƒ½ã€‚
  * ByteArrayInputStream: å®ç°äº†è¯»å–å­—èŠ‚æ•°ç»„çš„åŠŸèƒ½ã€‚

```java
import java.io.InputStream;

class FileInputStream extends InputStream {

  @Override
  public int read() {
    // å¯¹readæ–¹æ³•è¿›è¡Œå®ç°
    ......
  }
}
```
* æŠ½è±¡è£…é¥°å™¨ï¼ˆFilterInputStreamï¼‰ï¼š**å«æœ‰ä¸€ä¸ªæŠ½è±¡ç»„ä»¶çš„å¼•ç”¨çš„å±æ€§**ï¼Œ
å¯¹æŠ½è±¡ç»„ä»¶ä¸­æ–¹æ³•(ä¾‹å¦‚ï¼šread() æ–¹æ³•)è¿›è¡Œå®ç°(ä¹Ÿå¯ä»¥ä¸å®ç°ï¼Œç•™ç»™å…·ä½“çš„è£…é¥°å™¨å®ç°)ï¼Œ
å¦‚æœå®ç°æ˜¯é€šè¿‡æŠ½è±¡ç»„ä»¶çš„å¼•ç”¨å®ç°çš„ã€‚

```java
import java.io.InputStream;

class FilterInputStream extends InputStream {

  // in æŒ‡å‘ä¸€ä¸ªå…·ä½“çš„ç»„ä»¶
  private InputStream in;

  // é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥å…·ä½“çš„ç»„ä»¶
  pulbic FilterInputStream(InputStream in) {
    this.in = in;
  }
  ......

  // è¯¥æ–¹æ³•å¯å®ç° ä¹Ÿå¯ä¸å®ç°
  @Override
  public int read() {
    // è°ƒç”¨ å…·ä½“ç»„ä»¶çš„readæ–¹æ³•
    in.read();
  }
  ......
}

```
* è£…é¥°å™¨(LowerCaseInputStream)ï¼šç»§æ‰¿(æˆ–å®ç°) æŠ½è±¡è£…é¥°å™¨ï¼Œé‡å†™(æˆ–å®ç°) æŠ½è±¡è£…é¥°å™¨ä¸­çš„æ–¹æ³•ã€‚
```java
class LowerCaseInputStream extends FilterInputStream{
  public LowCaseInputStream(InputStream in){
    super(in);
  }
  
  @Override
  public int read(){
    // å€ŸåŠ©è¢«åŒ…è£…çš„ å…·ä½“ç»„ä»¶çš„ in.read() å®ç°å½“å‰ç±»çš„readæ–¹æ³•
    ......
  }
}
```
### 4. å·¥å‚æ¨¡å¼
ä¸€ä¸ªAç±»ä¸­éœ€è¦åˆ›å»ºBç±»ï¼Œä¸ºäº†å°†åˆ›å»ºçš„è¿‡ç¨‹ å’Œ Aç±»çš„ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œå¯ä»¥é‡‡ç”¨å·¥å‚æ¨¡å¼å¯¹Bç±»è¿›è¡Œåˆ›å»ºã€‚
#### 4.1 ç®€å•å·¥å‚
* äº§å“: æœ‰ä¸€ä¸ªæŠ½è±¡çš„äº§å“ç±»æ¥å£ï¼ˆæœ¬ä¹¦ä¸­æ˜¯æŠ«è¨æ¥å£ç±»ï¼‰ï¼Œæ‰€æœ‰çš„å…·ä½“äº§å“ç±»éƒ½å®ç°è¿™ä¸ªäº§å“æ¥å£ï¼ˆèŠå£«æŠ«è¨ã€è›¤ä¿æŠ«è¨ç­‰ç­‰ï¼‰ã€‚
* åˆ›å»ºè€…: åªæœ‰ä¸€ä¸ªå…·ä½“çš„åˆ›å»ºè€…ç±»ã€‚
#### 4.2 å·¥å‚æ–¹æ³•
å¯èƒ½å­˜åœ¨ä¸åŒçš„åˆ›å»ºè€… æœ‰ä¸åŒçš„åˆ›å»ºè§„åˆ™ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼

* äº§å“: æœ‰ä¸€ä¸ªæŠ½è±¡çš„äº§å“ç±»æ¥å£ï¼Œæ¯ä¸ªå…·ä½“çš„äº§å“å®ç°è¿™ä¸ªäº§å“æ¥å£ã€‚
* åˆ›å»ºè€…: ä¹Ÿæœ‰ä¸€ä¸ªæŠ½è±¡çš„åˆ›å»ºè€…æ¥å£ï¼ˆæœ¬ä¹¦ä¸­æ˜¯ æŠ«è¨åº—ï¼‰ï¼Œæ¯ä¸ªå…·ä½“çš„åˆ›å»ºè€…å®ç°åˆ›å»ºè€…æ¥å£ï¼ˆæœ‰çº½çº¦çš„æŠ«è¨åº—ã€èŠåŠ å“¥çš„æŠ«è¨åº—ç­‰ï¼‰
**æœ¬ä¹¦ä¸­è¿˜é‡‡ç”¨ æ¨¡ç‰ˆæ–¹æ³• è®¾è®¡æ¨¡å¼ï¼Œå°†ä¸‹å•æŠ«è¨çš„è¿‡ç¨‹ç”Ÿæˆä¸€ä¸ªæ¨¡ç‰ˆã€‚**
#### 4.3 æŠ½è±¡å·¥å‚
äº§å“è¿˜å¯èƒ½æ˜¯ä¸€ä¸ªäº§å“æ—ï¼Œå› æ­¤ä¼šæœ‰å¤šä¸ªäº§å“æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼ã€‚
* åŸææ–™æ—: ä¸€ä¸ªæŠ«è¨ä¾èµ–å¤šç§åŸææ–™ï¼ˆé¢å›¢ã€è›¤ä¿ã€èŠå£«ç­‰ç­‰ï¼‰ï¼Œæ¯ä¸ªåŸææ–™éƒ½æ˜¯ä¸€ä¸ªæ¥å£
åŒæ—¶ï¼Œæ¯ä¸ªåŸææ–™æ¥å£éƒ½æœ‰å¤šä¸ªå®ç°ï¼ˆåšé¢å›¢ã€è–„é¢å›¢ã€å†»è›¤ä¿ã€æ–°é²œè›¤ä¿ç­‰ç­‰ï¼‰
* åŸææ–™åˆ›å»ºè€…: å­˜åœ¨ä¸€ä¸ªåŸææ–™çš„åˆ›å»ºè€…æ¥å£ï¼Œå…¶ä¸­åŒ…å«äº†æ‰€æœ‰çš„åˆ›å»ºåŸææ–™æ–¹æ³•(createDough, createClam, createCheeseç­‰ç­‰)
å…·ä½“çš„åŸææ–™åˆ›å»ºè€…ï¼ˆçº½çº¦åŸææ–™åˆ›å»ºè€…ï¼ŒèŠåŠ å“¥åŸææ–™åˆ›å»ºè€… ç­‰ç­‰ï¼‰å®ç°è¿™äº›æ¥å£ã€‚
åŸææ–™æ— å’Œ åŸææ–™åˆ›å»ºè€…ä¹‹é—´æ˜¯ä½¿ç”¨çš„ æŠ½è±¡å·¥å‚è®¾è®¡æ¨¡å¼ã€‚
* æŠ«è¨: æŠ«è¨ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒä¾èµ–äºåŸææ–™åˆ›å»ºè€…ï¼Œå…·ä½“çš„æŠ«è¨ï¼ˆèŠå£«æŠ«è¨ã€è›¤ä¿æŠ«è¨ç­‰ç­‰ï¼‰å®ç°è¿™ä¸ªæŠ«è¨æ¥å£ã€‚
* æŠ«è¨åº—: æŠ«è¨åº—ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…·ä½“çš„æŠ«è¨åº—ï¼ˆçº½çº¦æŠ«è¨åº—ã€èŠåŠ å“¥æŠ«è¨åº—ç­‰ç­‰ï¼‰å®ç°è¿™ä¸ªæŠ«è¨åº—æ¥å£
æŠ«è¨åº—ï¼ˆåˆ›å»ºè€…ï¼‰ å’Œ æŠ«è¨ï¼ˆäº§å“ï¼‰ ä¹‹é—´æ„Ÿè§‰æ˜¯å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼ã€‚

è¿™ä¸ªä»£ç æ•´ä½“è¿˜æ˜¯æœ‰äº›å¤æ‚ï¼Œæˆ‘è§‰å¾—ä¸¾æ•°æ®åº“çš„ä¾‹å­æ¯”è¾ƒå®¹æ˜“ç†è§£ æŠ½è±¡å·¥å‚ã€‚
äº§å“æ—ï¼šæ•°æ®åº“è¿æ¥æ¥å£ï¼ˆconnectionï¼‰ æ•°æ®åº“statementæ¥å£
* connectionæ¥å£å®ç°ï¼šmysql connectionï¼Œoracle connection
* statementæ¥å£å®ç°ï¼šmysql statementï¼Œ oracle statement

åˆ›å»ºè€…ï¼šåˆ›å»ºè€…æ¥å£ä¸­å«æœ‰ åˆ›å»ºconnection å’Œ åˆ›å»º statementçš„æ–¹æ³•ã€‚
```java
interface AbstractFactory{
  Connection createConnection();
  Statement createStatement();
}
```
è¿™ç§æ¨¡å¼çš„ç¼ºç‚¹å°±æ˜¯ï¼šå½“éœ€è¦æ–°åŠ ä¸€ä¸ªäº§å“æ¥å£çš„æ—¶å€™ä¼šæœ‰äº›å¤æ‚ï¼Œéœ€è¦åœ¨åˆ›å»ºè€…æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œ

æ‰€æœ‰çš„å…·ä½“åˆ›å»ºè€…å®ç°ç±»åˆè¦å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œæ”¹åŠ¨ä¼šæ¯”è¾ƒå¤§ã€‚

### 5. å•ä¾‹æ¨¡å¼
ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ç»™å…¨å±€è¿›è¡Œè®¿é—®ã€‚
* æ„é€ å‡½æ•°å¿…é¡»æ˜¯ç§æœ‰
* å¼•ç”¨å¿…é¡»æ˜¯volatile + static, volatileä¿è¯äº†å¼•ç”¨çš„å¯è§æ€§ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚
* å®ä¾‹åŒ–æ–¹æ³•å†…éƒ¨å¿…é¡»ä½¿ç”¨é”
```java
public class Singleton {
  // å•ä¾‹çš„å¼•ç”¨(volatile + é™æ€)
  private volatile static Singleton singletonInstance;

  // ç§æœ‰çš„æ„é€ å‡½æ•°
  private Singleton(){
    // åœ¨å¤šçº¿ç¨‹è·å–å•ä¾‹çš„æƒ…å†µä¸‹ï¼Œ åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡
    log.info("Singletonçš„å®ä¾‹è¢«åˆ›å»º!");
  }

  // åŒé‡æ£€æŸ¥é”
  public static Singleton getSingletonInstance() {
    if (Objects.isNull(singletonInstance)){
      // ä½¿ç”¨ç±»å¯¹è±¡ä½œä¸ºé” ä¿è¯åŒæ­¥
      synchronized (Singleton.class){
        // å†ä¸€æ¬¡åˆ¤æ–­
        if (Objects.isNull(singletonInstance)){
          singletonInstance = new Singleton();
        }
      }
    }
    // singletonInstanceä¸ä¸ºnull å°±ä¸ç”¨æŠ¢å é” å‡å°‘æ€§èƒ½å¼€é”€
    return singletonInstance;
  }
}
```

### 6.å‘½ä»¤æ¨¡å¼
å°†è¯·æ±‚å°è£…æˆå¯¹è±¡ï¼Œä»¥ä¾¿ä½¿ç”¨ä¸åŒçš„è¯·æ±‚ã€é˜Ÿåˆ—æˆ–è€…æ—¥å¿—æ¥å‚æ•°åŒ–å…¶ä»–å¯¹è±¡ã€‚
* å‘½ä»¤æ¥å£ï¼šå®šä¹‰äº†å‘½ä»¤çš„æ‰§è¡Œæ–¹æ³•(Command)
```java
interface Command{
  void execute();
} 
```
* å…·ä½“å‘½ä»¤ï¼šå®ç°å‘½ä»¤æ¥å£ï¼Œä¾‹å¦‚ï¼šæ‰“å¼€ç”µç¯çš„å‘½ä»¤(LightOnCommand)ã€å…³é—­ç”µç¯çš„å‘½ä»¤(LightOffCommand)
å‘½ä»¤ç±»çš„å®ç°ç±»ä¸­ä¼šå«æœ‰ä¸€ä¸ªæ‰§è¡Œè€…çš„å¼•ç”¨ï¼Œç”¨äºå®ç°å…·ä½“çš„æ‰§è¡Œæ“ä½œã€‚
```java
class LightOnCommand implements Command{
  private Light light;
  ......
  @Override
  void execute(){
    light.on();
  }
}
```
* å‘½ä»¤çš„æ‰§è¡Œè€…ï¼šå‘½ä»¤çš„å…·ä½“æ‰§è¡Œå¯¹è±¡ï¼Œä¾‹å¦‚ï¼šç”µç¯(Light)
```java
class Light{
  void on(){
    ......
  }
}
```
* å‘½ä»¤çš„è°ƒç”¨è€…ï¼šè°ƒç”¨å‘½ä»¤çš„å¯¹è±¡ï¼Œå…¶ä¸­å«æœ‰å‘½ä»¤å±æ€§ï¼Œä¾‹å¦‚ï¼šé¥æ§å™¨(RemoteControl)
```java
class RemoteControl{
  private Command command;
  ......
  
  void buttonOn(){
    command.execute();
  }
}
```
ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯ï¼šå‘½ä»¤çš„è°ƒç”¨è€…ä¸ç›´æ¥æ“ä½œå‘½ä»¤çš„æ‰§è¡Œè€…ï¼Œå°†ä¸¤è€…æ¥è€¦å¼€æ¥ã€‚ï¼ˆä¹‹å‰æ²¡æ€ä¹ˆä½¿ç”¨è¿‡ã€‚ï¼‰
åº”ç”¨åœºæ™¯ï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œæ—¥å¿—ç­‰ç­‰ã€‚
æ—¥å¿—çš„ä¾‹å­ï¼šæ—¥å¿—çš„è®°å½•æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œæ—¥å¿—çš„æ‰§è¡Œè€…æ˜¯ä¸€ä¸ªæ—¥å¿—ç±»ï¼Œæ—¥å¿—çš„è°ƒç”¨è€…æ˜¯ä¸€ä¸ªä¸šåŠ¡ç±»ã€‚

### 7. é€‚é…å™¨æ¨¡å¼
å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼å¯ä»¥è®©åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

**é€‚é…å™¨æä¾›ç»™å®¢æˆ·çš„æ–¹æ³•ä¾ç„¶æ˜¯å®¢æˆ·å¸Œæœ›çš„æ–¹æ³•**ï¼Œåªæ˜¯è¯¥æ–¹æ³•çš„å®ç°æ˜¯é€šè¿‡è°ƒç”¨è¢«é€‚é…å™¨çš„æ–¹æ³•å®ç°çš„ã€‚
* é€‚é…å™¨æ¥å£ç±»(target)ï¼šå«æœ‰å®¢æˆ·å¸Œæœ›çš„æ¥å£æ–¹æ³•ï¼ˆä¾‹å¦‚duckçš„quack()æ–¹æ³•ï¼‰
```java
class Target{
  void quack();
}
```
* è¢«é€‚é…å™¨ç±»(adaptee)ï¼šå«æœ‰å®¢æˆ·ä¸å¸Œæœ›çš„æ¥å£æ–¹æ³•ï¼ˆä¾‹å¦‚turkeyçš„gobble()æ–¹æ³•ï¼‰
```java
class Adaptee{
  void gobble(){
    ......
  }
}
```
* é€‚é…å™¨å®ç°ç±»(adapter)ï¼šå®ç°Targetæ¥å£ï¼Œ**å«æœ‰è¢«é€‚é…å™¨çš„å¼•ç”¨**
```java
class Adapter implements Target{
  private Adaptee adaptee;
  ......
  @Override
  void quack(){
    adaptee.gobble();
  }
}
```
é€‚é…å™¨æ¨¡å¼ï¼šè¿›è¡Œæ¥å£çš„è½¬æ¢ï¼Œå°†ä¸€ä¸ªä¸å…¼å®¹çš„æ¥å£åŒ…è£…èµ·æ¥ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªå…¼å®¹çš„æ¥å£ã€‚ï¼ˆadapter å’Œ adaptee çš„æ–¹æ³•åç§°ä¸ä¸€æ ·ï¼‰
è£…é¥°å™¨æ¨¡å¼ï¼šç»™æ¥å£æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚ï¼ˆè£…é¥°è€… å’Œ è¢«è£…é¥°è€… çš„æ–¹æ³•åç§°éƒ½æ˜¯ä¸€æ ·ï¼‰

### 8. å¤–è§‚æ¨¡å¼
æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚
å¤–è§‚æ¨¡å¼çš„ç›®çš„è¿˜æ˜¯æ–¹ä¾¿å®¢æˆ·ç«¯çš„ä½¿ç”¨ï¼Œå°†ä¸€äº›å¤æ‚çš„æ“ä½œå°è£…èµ·æ¥ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ç»™å®¢æˆ·ç«¯ã€‚

å¤–è§‚æ¥å£ï¼šå®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œå…¶ä¸­åŒ…å«äº†å­ç³»ç»Ÿçš„å¼•ç”¨ã€‚
```java
class Facade{
  private Component1 component1;
  private Component2 component2;
  ......
  void method(){
    component1.method();
    component2.method();
  }
}
```
å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼šé€‚é…å™¨æ¨¡å¼æ˜¯å°†ä¸€ä¸ªæ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªæ¥å£ï¼Œå¤–è§‚æ¨¡å¼æ˜¯å°†ä¸€ç¾¤æ¥å£å°è£…æˆä¸€ä¸ªæ¥å£ï¼Œç®€åŒ–å¯¹æ¥å£çš„è°ƒç”¨ã€‚

å¾ˆå¤šè®¾è®¡çš„æ€è·¯éƒ½æ˜¯è®¾è®¡ä¸€ä¸ªä¸­é—´å±‚ï¼Œå°†å¤–éƒ¨ å’Œ å†…éƒ¨è¿›è¡Œè§£è€¦åˆï¼š
é€‚é…å™¨æ¨¡å¼çš„ä¸­é—´å±‚æ˜¯ï¼šé€‚é…å™¨æ¥å£ï¼ˆtargetï¼‰ï¼Œå…¶ä¸­çš„ç»„ä»¶æ˜¯ï¼šè¢«é€‚é…å™¨æ¥å£ï¼ˆadapteeï¼‰
å‘½ä»¤æ¨¡å¼çš„ä¸­é—´å±‚æ˜¯ï¼šå‘½ä»¤æ¥å£ï¼ˆcommandï¼‰ï¼Œå…¶ä¸­çš„ç»„ä»¶æ˜¯ï¼šå‘½ä»¤çš„æ‰§è¡Œè€…ï¼ˆreceiverï¼‰
å¤–è§‚æ¨¡å¼çš„ä¸­é—´å±‚æ˜¯ï¼šå¤–è§‚æ¥å£ï¼ˆfacadeï¼‰ï¼Œå…¶ä¸­çš„ç»„ä»¶æ˜¯ï¼šå­ç³»ç»Ÿçš„æ¥å£ï¼ˆcomponentï¼‰

### 9. æ¨¡æ¿æ–¹æ³•æ¨¡å¼
å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œå°†ä¸€äº›æ­¥éª¤çš„å…·ä½“å®ç°å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ è™½ç„¶è®¸å¤šæ—¶å€™ ç»„åˆè¦ä¼˜äº ç»§æ‰¿ï¼Œä½†æ˜¯ç»§æ‰¿ä»ç„¶æœ‰è®¸å¤šçš„å¥½å¤„ï¼šå‡å°‘ä»£ç çš„å¤ç”¨ï¼Œå°è£…ä»£ç çš„é€»è¾‘ã€‚
æ¨¡ç‰ˆæ–¹æ³•æ˜¯å¹³æ—¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚å¹³æ—¶å†™ä¸šåŠ¡ä»£ç æ—¶å­˜åœ¨å¤šä¸ªrepositoryï¼Œå…¶ä¸­å¤§éƒ¨åˆ†çš„ä¸»ä½“é€»è¾‘æ˜¯ç›¸åŒçš„ï¼Œ
åªæœ‰ä¸€äº›å…·ä½“çš„å®ç°æœ‰äº›ä¸åŒï¼Œè¿™æ—¶å°±å¯ä»¥å†™ä¸€ä¸ªæŠ½è±¡çš„repositoryï¼Œå°†ç›¸åŒçš„é€»è¾‘å†™åœ¨æŠ½è±¡ç±»ä¸­ï¼Œå°†ä¸åŒçš„é€»è¾‘ç•™ç»™å…·ä½“çš„å®ç°ç±»ã€‚
æ¨¡ç‰ˆç±»(AbstractTemplate)ï¼šå®šä¹‰äº†ä¸€ä¸ªæ¨¡ç‰ˆæ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›å…·ä½“çš„é€»è¾‘ï¼Œä»¥åŠä¸€äº›æŠ½è±¡çš„æ–¹æ³•ï¼Œè¿™äº›æŠ½è±¡çš„æ–¹æ³•ç•™ç»™å­ç±»å®ç°ã€‚
**âš ï¸ æŠ½è±¡çš„æ–¹æ³•å°½é‡ä½¿ç”¨protectedï¼Œå¯¹å­ç±»å¯è§ï¼Œå¯¹å…¶ä»–ç±»ä¸å¯è§ã€‚**
**âš ï¸ æ¨¡ç‰ˆæ–¹æ³•ä½¿ç”¨public + finalä¿®é¥°ï¼Œå¯¹å¤–éƒ¨å¯è§ï¼ŒåŒæ—¶å­ç±»ä¸èƒ½é‡å†™**
```java
abstract class AbstractTemplate{
  // æ¨¡ç‰ˆæ–¹æ³• ä½¿ç”¨public + finalä¿®é¥°ï¼Œä¸å…è®¸å­ç±»é‡å†™
  public final void templateMethod(){
    // å…·ä½“çš„é€»è¾‘
    ......
    // æŠ½è±¡çš„æ–¹æ³•
    abstractMethod();
    // é’©å­æ–¹æ³•
    hookMethod();
  }
  // æŠ½è±¡çš„æ–¹æ³•
  protected abstract void abstractMethod();
  
  // é’©å­æ–¹æ³•
  protected void hookMethod(){
    // é’©å­æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œå­ç±»å¯ä»¥é€‰æ‹©æ€§çš„é‡å†™
  }
}
```
* å…·ä½“çš„å®ç°ç±»(Concrete)ï¼šå®ç°äº†æŠ½è±¡çš„æ–¹æ³•ï¼Œä»¥åŠé’©å­æ–¹æ³•ã€‚
```java
class Concrete extends AbstractTemplate{
  @Override
  protected void abstractMethod(){
    // å…·ä½“çš„å®ç°
    ......
  }
  
  @Override
  protected void hookMethod(){
    // é’©å­æ–¹æ³•çš„å…·ä½“å®ç°
    ......
  }
}
```
å¥½è±ååŸåˆ™ï¼šä¸è¦è°ƒç”¨æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨ä½ ã€‚åœ¨æ¨¡ç‰ˆæ–¹æ³•ä¸­ï¼Œçˆ¶ç±»è°ƒç”¨å­ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯å­ç±»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚

### 10. è¿­ä»£å™¨æ¨¡å¼
æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚
* è¿­ä»£å™¨æ¥å£(Iterator)ï¼šå®šä¹‰äº†è¿­ä»£å™¨çš„æ–¹æ³•
```java
interface Iterator{
  boolean hasNext();
  Object next();
}
```
* å…·ä½“çš„è¿­ä»£å™¨å®ç°ç±»(ConcreteIterator)ï¼šå®ç°äº†è¿­ä»£å™¨æ¥å£, å®šä¹‰äº†ä¸€ç»„è¿­ä»£çš„æ“ä½œ
```java
class ConcreteIterator implements Iterator{
  @Override
  boolean hasNext(){
    ......
  }
  @Override
  Object next(){
    ......
  }
}
```
* èšåˆæ¥å£(Aggregate)ï¼šå®šä¹‰äº†èšåˆçš„æ–¹æ³•
```java
interface Aggregate{
  // å…·ä½“ä½¿ç”¨å“ªä¸ªè¿­ä»£å™¨ç”± å­ç±»å†³å®š
  Iterator createIterator();
}
```
* å…·ä½“çš„èšåˆå®ç°ç±»(ConcreteAggregate)ï¼šå®ç°äº†èšåˆæ¥å£
```java
class ConcreteAggregate implements Aggregate{
  
  // å…·ä½“ä½¿ç”¨å“ªä¸ªè¿­ä»£å™¨ç”± å­ç±»å†³å®š
  @Override
  Iterator createIterator(){
    return new ConcreteIterator();
  }
}
```
æœ‰ä¸€ç§å·¥å‚æ–¹æ³•çš„æ„Ÿè§‰ï¼š
å·¥å‚æ¥å£ -> èšåˆæ¥å£
äº§å“æ¥å£ -> è¿­ä»£å™¨æ¥å£

### 11. ç»„åˆæ¨¡å¼
èŠ‚ç‚¹æ¥å£: æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œç›¸å½“äºç»„åˆçš„æ¯ä¸ª å…ƒç´ ã€‚æ¯”å¦‚è¯´å«æœ‰ï¼šaddæ–¹æ³•ã€removeæ–¹æ³•ç­‰ç­‰
å¶å­èŠ‚ç‚¹ï¼šå®ç° èŠ‚ç‚¹æ¥å£ï¼Œä¸å¯¹addæ–¹æ³•ï¼Œremoveæ–¹æ³•æä¾›åŠŸèƒ½
æ™®é€šèŠ‚ç‚¹ï¼šå®ç° èŠ‚ç‚¹æ¥å£ï¼Œå¯¹å…¶ä¸­çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå®ç°

Todo
å¤–éƒ¨çš„è¿­ä»£å™¨æ¨¡å¼ï¼š**æ²¡å¤ªç†è§£ï¼Œçƒ¦æ­»äº†ğŸ˜¡**

### 12. çŠ¶æ€æ¨¡å¼
å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚
ä¸Šä¸‹æ–‡ç±»(Context): å«æœ‰ä¸€ä¸ªçŠ¶æ€çš„å¼•ç”¨ï¼Œç”¨äºåˆ‡æ¢çŠ¶æ€ã€‚

```java
import com.kingpopen.statepattern.State;
import lombok.extern.slf4j.Slf4j;

class Context {

  // ä¸€ä¸ªçŠ¶æ€çš„å¼•ç”¨
  private State state;

  // åˆ‡æ¢çŠ¶æ€çš„æ–¹æ³•
  void changeState(State state) {
    this.state = state;
  }
  
  // ç»™å¤–éƒ¨è°ƒç”¨çš„æ–¹æ³•
  void request() {
    state.handle();
  }
}
```
```java
çŠ¶æ€æ¥å£(State): å®šä¹‰äº†çŠ¶æ€ä¸­å¯ä»¥æ‰§è¡Œçš„æ–¹æ³•
```java
interface State{
  void handle();
}
```
å…·ä½“çš„çŠ¶æ€å®ç°ç±»(ConcreteState): å®ç°äº†çŠ¶æ€æ¥å£ï¼Œå®šä¹‰äº†çŠ¶æ€çš„å…·ä½“è¡Œä¸ºã€‚
**å…¶ä¸­å«æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡çš„å¼•ç”¨**
**å€¼å¾—æ³¨æ„çš„æ˜¯åˆ‡æ¢çŠ¶æ€çš„é€»è¾‘ æ˜¯æ”¾åœ¨äº†å…·ä½“çš„çŠ¶æ€ç±»å†…éƒ¨ï¼Œè¿™æ ·å‡å°‘äº†è€¦åˆæ€§**ï¼Œéœ€è¦è¯¥é€»è¾‘å°±åªéœ€è¦æ‰¾åˆ°å¯¹åº”çš„çŠ¶æ€ç±»å»ä¿®æ”¹ã€‚
```java
class ConcreteState implements State{
  private Context context;
  ......
  @Override
  void handle(){
    // å…·ä½“çš„çŠ¶æ€è¡Œä¸º
    ......
    // åˆ‡æ¢çŠ¶æ€
    context.changeState(new ConcreteState());
  }
}
```